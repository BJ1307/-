<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday</title>
    <style>
        /* --- å…¨å±€è®¾ç½® --- */
        :root {
            --bg-color: #fdfbf7;
            --card-bg: #ffffff;
            --accent-color: #8da399; /* è«å…°è¿ªç»¿ */
            --text-main: #2c3e50;
            --btn-shadow: rgba(141, 163, 153, 0.4);
        }

        body {
            margin: 0; height: 100vh;
            display: flex; justify-content: center; align-items: center;
            background-color: var(--bg-color);
            font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", sans-serif;
            color: var(--text-main);
            overflow: hidden;
            background-image: radial-gradient(#e0e0e0 1px, transparent 1px);
            background-size: 20px 20px;
        }

        /* --- é€šç”¨å¡ç‰‡å®¹å™¨ --- */
        .card-container {
            position: absolute;
            background: var(--card-bg);
            padding: 40px;
            border-radius: 40px;
            box-shadow: 0 20px 40px -10px rgba(0,0,0,0.05);
            text-align: center;
            max-width: 320px; width: 80%;
            opacity: 0; pointer-events: none; transform: translateY(20px);
            transition: all 1s ease;
        }

        .visible { opacity: 1 !important; transform: translateY(0) !important; pointer-events: auto !important; }
        .hidden { opacity: 0 !important; transform: translateY(-20px) !important; pointer-events: none !important; }

        /* --- ç¬¬ä¸€é¡µï¼šæ—¶é—´å¼•å¯¼ --- */
        #layer-1 {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            z-index: 100; transition: opacity 1s;
        }
        #realtime-clock { font-size: 3rem; font-weight: 300; letter-spacing: 2px; margin-bottom: 20px; }
        .guide-text { color: #95a5a6; letter-spacing: 2px; animation: pulse 2s infinite; }
        @keyframes pulse { 50% { opacity: 0.5; } }

        /* --- ç¬¬äºŒé¡µ & ç¬¬ä¸‰é¡µ é€šç”¨å…ƒç´  --- */
        .vinyl-wrapper {
            width: 180px; height: 180px; margin: 0 auto 30px;
            border-radius: 50%; border: 4px solid white;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .vinyl { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; }
        .playing .vinyl { animation: spin 20s linear infinite; }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        h1 { font-weight: 300; font-size: 1.6rem; margin: 10px 0; }
        
        /* å¹´é¾„è®¡æ•°å™¨ */
        #age-counter { font-size: 4.5rem; color: var(--accent-color); font-weight: 200; line-height: 1; margin: 20px 0; }

        /* æŒ‰é’®æ ·å¼ */
        .btn {
            display: block; width: 100%; padding: 16px 0;
            margin-top: 30px; border-radius: 50px;
            background: var(--accent-color); color: white;
            text-decoration: none; font-size: 1rem; letter-spacing: 1px;
            box-shadow: 0 10px 20px -5px var(--btn-shadow);
            border: none; cursor: pointer; transition: 0.3s;
        }
        .btn:hover { transform: translateY(-3px); background-color: #7d938a; }

        /* ç¬¬ä¸‰é¡µç‰¹å®šæ ·å¼ */
        .gift-desc { color: #95a5a6; font-size: 0.9rem; margin-top: 15px; line-height: 1.6; }
        
    </style>
</head>
<body onclick="goToPage2()">

    <div id="layer-1">
        <div id="realtime-clock">00:00:00</div>
        <div class="guide-text">ç‚¹ä¸‹å±å¹• ä¸éœ€è¦è®¸æ„¿</div>
    </div>

    <div id="layer-2" class="card-container">
        <div class="vinyl-wrapper">
            <img src="image_0.png" class="vinyl" alt="Cover">
        </div>
        <h1>ç¥cixtoyisç”Ÿæ—¥å¿«ä¹</h1>
        <div id="age-counter">1</div>
        
        <button class="btn" onclick="goToPage3(event)">ç‚¹å‡»è·å¾—ç”Ÿæ—¥ç¤¼ç‰© ğŸ</button>
    </div>

    <div id="layer-3" class="card-container">
        <div class="vinyl-wrapper">
            <img src="image_0.png" class="vinyl" alt="Cover">
        </div>
        
        <h1 style="font-size: 1.4rem;">ä¸€ä»½ç‰¹åˆ«çš„ç¤¼ç‰©</h1>
        
        <a href="https://radio.garden/listen/hits/ht39osWT" target="_blank" class="btn">
            æ‰“å¼€ Radio Garden ğŸŒ
        </a>
        
        <p class="gift-desc">è¿™æ˜¯ä¸€ä¸ªèƒ½å¬å…¨ä¸–ç•Œç”µå°çš„ç½‘ç«™<br>æ„¿ä½ çš„ä¸–ç•Œæ°¸è¿œå¹¿é˜”</p>
    </div>

    <audio id="bgm" loop>
        <source src="åˆ«ç‚¹æˆ‘.mp3" type="audio/mpeg">
    </audio>

    <script>
        // æ—¶é’Ÿé€»è¾‘
        function updateClock() {
            const now = new Date();
            document.getElementById('realtime-clock').innerText = now.toLocaleTimeString('en-GB');
        }
        setInterval(updateClock, 1000);
        updateClock();

        let state = 0; // 0=Page1, 1=Page2, 2=Page3

        // è·³è½¬åˆ°ç¬¬äºŒé¡µ
        function goToPage2() {
            if (state !== 0) return;
            state = 1;

            // æ’­æ”¾éŸ³ä¹
            document.getElementById('bgm').play().catch(()=>{});

            // ç•Œé¢åˆ‡æ¢
            document.getElementById('layer-1').style.opacity = 0;
            setTimeout(() => { document.getElementById('layer-1').style.display = 'none'; }, 1000);

            const page2 = document.getElementById('layer-2');
            page2.classList.add('visible');
            page2.classList.add('playing'); // å¼€å§‹æ—‹è½¬

            // å¼€å§‹æ•°å­—åŠ¨ç”» 1 -> 21
            startAgeCounter();
        }

        // è·³è½¬åˆ°ç¬¬ä¸‰é¡µ
        function goToPage3(e) {
            e.stopPropagation(); // é˜²æ­¢å†’æ³¡è§¦å‘bodyç‚¹å‡»
            if (state !== 1) return;
            state = 2;

            const page2 = document.getElementById('layer-2');
            const page3 = document.getElementById('layer-3');

            // page2 æ¶ˆå¤±
            page2.classList.add('hidden');
            page2.classList.remove('visible');

            // page3 å‡ºç°
            setTimeout(() => {
                page3.classList.add('visible');
                page3.classList.add('playing'); // ç¬¬ä¸‰é¡µç»§ç»­æ—‹è½¬
            }, 500);
        }

        // æ•°å­—åŠ¨ç”»é€»è¾‘
        function startAgeCounter() {
            let current = 1;
            const target = 21;
            const dom = document.getElementById('age-counter');
            
            // åŠ¨ç”»æ—¶é•¿2.5ç§’
            const interval = 2500 / 20; 

            const timer = setInterval(() => {
                current++;
                dom.innerText = current;
                if (current >= target) clearInterval(timer);
            }, interval);
        }
    </script>
</body>
</html>
