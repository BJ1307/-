<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy 21st Birthday</title>
    <style>
        /* --- æç®€é…è‰²ä¸å…¨å±€è®¾ç½® --- */
        :root {
            --bg-color: #fdfbf7; /* æ¸©æš–çš„å¥¶æ²¹ç™½èƒŒæ™¯ */
            --card-bg: #ffffff;
            --accent-color: #8da399; /* è«å…°è¿ªç»¿ï¼Œæ›´é«˜çº§ */
            --text-main: #2c3e50;
            --text-sub: #95a5a6;
            --btn-shadow: rgba(141, 163, 153, 0.4);
        }

        body {
            margin: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: var(--bg-color);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", "PingFang SC", sans-serif;
            color: var(--text-main);
            overflow: hidden;
            /* å¢åŠ ä¸€ç‚¹æå…¶å¾®å¼±çš„å™ªç‚¹çº¹ç†ï¼Œæå‡è´¨æ„Ÿï¼ˆå¯é€‰ï¼‰ */
            background-image: radial-gradient(#e0e0e0 1px, transparent 1px);
            background-size: 20px 20px;
        }

        /* --- ç¬¬ä¸€é¡µï¼šå‘¼å¸å¼•å¯¼é¡µ --- */
        #guide-layer {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            background: var(--bg-color);
            z-index: 999;
            transition: opacity 1.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* å®æ—¶æ—¶é—´ */
        #realtime-clock {
            font-size: 3rem;
            font-weight: 300;
            color: var(--text-main);
            margin-bottom: 20px;
            letter-spacing: 2px;
        }

        .guide-sub {
            margin-top: 15px;
            font-size: 1rem;
            color: #b2bec3;
            font-weight: 300;
            letter-spacing: 2px;
            animation: pulse 3s infinite ease-in-out;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.4; }
            50% { opacity: 1; }
        }

        /* --- ç¬¬äºŒé¡µï¼šä¸»å¡ç‰‡ --- */
        .card-container {
            position: relative;
            background: var(--card-bg);
            padding: 50px 40px;
            border-radius: 40px; /* è¶…å¤§åœ†è§’ */
            /* æç®€é£çš„æ ¸å¿ƒï¼šå¤šå±‚æŸ”å’Œé˜´å½± */
            box-shadow: 
                0 20px 40px -10px rgba(0,0,0,0.05),
                0 0 100px -20px rgba(141, 163, 153, 0.1);
            text-align: center;
            max-width: 320px;
            width: 80%;
            opacity: 0;
            transform: translateY(40px) scale(0.95);
            transition: all 1.2s cubic-bezier(0.34, 1.56, 0.64, 1); /* å¼¹æ€§åŠ¨æ•ˆ */
            pointer-events: none;
        }

        .card-container.visible {
            opacity: 1;
            transform: translateY(0) scale(1);
            pointer-events: auto;
        }

        /* å”±ç‰‡å°é¢ */
        .vinyl-wrapper {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 0 auto 40px; /* å¢åŠ ç•™ç™½ */
        }
        
        .vinyl {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
            /* å°é¢é˜´å½± */
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
            transition: transform 1s;
        }
        
        /* æ’­æ”¾æ—¶çš„æ—‹è½¬åŠ¨ç”» */
        .playing .vinyl {
            animation: spin 20s linear infinite;
        }

        @keyframes spin { 100% { transform: rotate(360deg); } }

        /* æ–‡å­—æ’ç‰ˆ */
        h1 {
            font-weight: 300; /* ç»†å­—ä½“æ›´ä¼˜é›… */
            font-size: 1.8rem;
            margin: 0 0 10px;
            letter-spacing: 1px;
            color: var(--text-main);
        }

        .status-text {
            font-size: 0.9rem;
            color: #e6a4b4; /* æŸ”å’Œçš„è„ç²‰è‰² */
            font-weight: 600;
            margin-bottom: 20px;
            letter-spacing: 1px;
        }

        /* å¹´é¾„è®¡æ•°å™¨ */
        #age-counter {
            font-size: 4rem;
            font-weight: 300;
            color: var(--accent-color);
            margin: 20px 0;
            line-height: 1;
        }

        /* æç®€æŒ‰é’® */
        .btn {
            display: block;
            background-color: var(--accent-color);
            color: white;
            text-decoration: none;
            padding: 18px 0;
            border-radius: 20px;
            font-size: 0.95rem;
            font-weight: 500;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            box-shadow: 0 10px 20px -5px var(--btn-shadow);
            width: 100%;
            margin-top: 30px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 25px -5px var(--btn-shadow);
            background-color: #7d938a;
        }

        .btn:active { transform: scale(0.98); }

        /* æ¼‚æµ®éŸ³ç¬¦ */
        .note {
            position: absolute;
            font-size: 20px;
            opacity: 0;
            pointer-events: none;
        }
        
        .playing .note { animation: floatUp 4s linear forwards; }

        @keyframes floatUp {
            0% { transform: translateY(0) rotate(0deg); opacity: 0; }
            20% { opacity: 0.6; }
            80% { opacity: 0.6; }
            100% { transform: translateY(-100px) rotate(45deg); opacity: 0; }
        }
    </style>
</head>
<body onclick="init()">

    <div id="guide-layer">
        <div id="realtime-clock">00:00:00</div>
        <div class="guide-sub">ç‚¹ä¸‹å±å¹• ä¸éœ€è¦è®¸æ„¿</div>
    </div>

    <div class="card-container" id="card">
        <div class="vinyl-wrapper">
            <img src="image_0.png" class="vinyl" alt="Cover">
        </div>

        <div class="status-text" id="status">âœ¨ Best Wishes for You âœ¨</div>
        <h1>ç¥cixtoyisç”Ÿæ—¥å¿«ä¹</h1>
        <div id="age-counter">1</div>

        <a href="https://radio.garden/listen/hits/ht39osWT" target="_blank" class="btn" onclick="event.stopPropagation()">
            æ¢ç´¢å…¨çƒç”µå° ğŸ
        </a>
    </div>

    <audio id="bgm" loop>
        <source src="åˆ«ç‚¹æˆ‘.mp3" type="audio/mpeg">
    </audio>

    <script>
        let started = false;

        // å®æ—¶æ—¶é—´æ›´æ–°
        function updateClock() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            document.getElementById('realtime-clock').innerText = `${hours}:${minutes}:${seconds}`;
        }
        setInterval(updateClock, 1000);
        updateClock(); // åˆå§‹åŒ–æ˜¾ç¤º

        function init() {
            if (started) return;

            const bgm = document.getElementById('bgm');
            const guide = document.getElementById('guide-layer');
            const card = document.getElementById('card');
            
            bgm.play().then(() => {
                started = true;
                
                // 1. éšè—å¼•å¯¼é¡µ
                guide.style.opacity = 0;
                setTimeout(() => guide.remove(), 1200);

                // 2. æ˜¾ç¤ºå¡ç‰‡
                setTimeout(() => {
                    card.classList.add('visible');
                    card.classList.add('playing');
                    startAgeCounter(); // å¼€å§‹æ•°å­—åŠ¨ç”»
                    spawnNotes();
                }, 300);

            }).catch(() => {
                alert("è¯·æ£€æŸ¥æ–‡ä»¶å¤¹å†…æ˜¯å¦æœ‰ã€åˆ«ç‚¹æˆ‘.mp3ã€‘æ–‡ä»¶");
            });
        }

        // å¹´é¾„è®¡æ•°å™¨åŠ¨ç”»
        function startAgeCounter() {
            let current = 1;
            const target = 21;
            const counterElement = document.getElementById('age-counter');
            const duration = 3000; // 3ç§’å†…å®Œæˆ
            const intervalTime = duration / (target - current);

            const timer = setInterval(() => {
                current++;
                counterElement.innerText = current;
                if (current >= target) {
                    clearInterval(timer);
                }
            }, intervalTime);
        }

        // ç”Ÿæˆé£˜åŠ¨çš„éŸ³ç¬¦
        function spawnNotes() {
            if(!started) return;
            const container = document.body;
            const symbols = ['â™ª', 'â™«', 'âœ¨'];
            
            // æ¯éš”0.8ç§’ç”Ÿæˆä¸€ä¸ªéŸ³ç¬¦
            setInterval(() => {
                const note = document.createElement('div');
                note.classList.add('note');
                note.innerText = symbols[Math.floor(Math.random() * symbols.length)];
                
                // éšæœºä½ç½®å’Œé¢œè‰²
                const left = 10 + Math.random() * 80;
                note.style.left = `${left}%`;
                note.style.bottom = '20%';
                note.style.color = Math.random() > 0.5 ? '#8da399' : '#e6a4b4';
                
                container.appendChild(note);
                
                // åŠ¨ç”»ç»“æŸåç§»é™¤å…ƒç´ 
                setTimeout(() => note.remove(), 4000);
            }, 800);
        }
    </script>
</body>
</html>
