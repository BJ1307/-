<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday</title>
    <style>
        /* --- å…¨å±€è®¾ç½® --- */
        :root {
            --bg-color: #fdfbf7;
            --card-bg: #ffffff;
            --accent-color: #8da399; /* è«å…°è¿ªç»¿ */
            --text-main: #2c3e50;
            --btn-shadow: rgba(141, 163, 153, 0.4);
        }

        body {
            margin: 0; height: 100vh;
            display: flex; justify-content: center; align-items: center;
            background-color: var(--bg-color);
            font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", sans-serif;
            color: var(--text-main);
            overflow: hidden;
            background-image: radial-gradient(#e0e0e0 1px, transparent 1px);
            background-size: 20px 20px;
        }

        /* --- é€šç”¨å¡ç‰‡å®¹å™¨ --- */
        .card-container {
            position: absolute;
            background: var(--card-bg);
            padding: 40px 30px; /* å·¦å³é—´è·ç¨å¾®è°ƒå°ä¸€ç‚¹ï¼Œé˜²æ­¢æ–‡å­—æ¢è¡Œå¤ªä¸‘ */
            border-radius: 40px;
            box-shadow: 0 20px 40px -10px rgba(0,0,0,0.05);
            text-align: center;
            max-width: 320px; width: 85%;
            opacity: 0; pointer-events: none; transform: translateY(20px);
            transition: all 1s ease;
        }

        .visible { opacity: 1 !important; transform: translateY(0) !important; pointer-events: auto !important; }
        .hidden { opacity: 0 !important; transform: translateY(-20px) !important; pointer-events: none !important; }

        /* --- ç¬¬ä¸€é¡µï¼šæ—¶é—´å¼•å¯¼ --- */
        #layer-1 {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            z-index: 100; transition: opacity 1s;
        }
        
        .time-label {
            font-size: 0.9rem; color: var(--accent-color);
            letter-spacing: 2px; margin-bottom: 5px; font-weight: bold;
        }
        
        #realtime-date {
            font-size: 1.2rem; color: #555;
            letter-spacing: 1px; margin-bottom: 5px;
            font-weight: 300;
        }

        #realtime-clock { font-size: 3.5rem; font-weight: 200; letter-spacing: 2px; margin-bottom: 20px; line-height: 1; }
        .guide-text { color: #95a5a6; letter-spacing: 2px; animation: pulse 2s infinite; font-size: 0.9rem; margin-top: 20px; }
        @keyframes pulse { 50% { opacity: 0.5; } }

        /* --- ç¬¬äºŒé¡µ & ç¬¬ä¸‰é¡µ é€šç”¨å…ƒç´  --- */
        .vinyl-wrapper {
            width: 160px; height: 160px; margin: 0 auto 25px; /* å›¾ç‰‡ç¨å¾®æ”¹å°ä¸€ç‚¹ç‚¹ï¼Œç»™æ–‡å­—è…¾ç©ºé—´ */
            border-radius: 50%; border: 4px solid white;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .vinyl { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; }
        .playing .vinyl { animation: spin 20s linear infinite; }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        h1 { font-weight: 300; font-size: 1.6rem; margin: 10px 0; }
        
        /* å¹´é¾„è®¡æ•°å™¨ */
        #age-counter { font-size: 4.5rem; color: var(--accent-color); font-weight: 200; line-height: 1; margin: 20px 0; }

        /* æŒ‰é’®æ ·å¼ */
        .btn {
            display: block; width: 100%; padding: 16px 0;
            margin-top: 25px; border-radius: 50px;
            background: var(--accent-color); color: white;
            text-decoration: none; font-size: 1rem; letter-spacing: 1px;
            box-shadow: 0 10px 20px -5px var(--btn-shadow);
            border: none; cursor: pointer; transition: 0.3s;
        }
        .btn:hover { transform: translateY(-3px); background-color: #7d938a; }

        /* ç¬¬ä¸‰é¡µç‰¹å®šæ ·å¼ */
        .wish-title {
            font-size: 1.3rem; margin: 10px 0; font-weight: 400; line-height: 1.5;
            color: var(--text-main);
        }

        .gift-desc { color: #95a5a6; font-size: 0.85rem; margin-top: 15px; margin-bottom: 5px; }
        
        /* æ–°å¢ï¼šåº•éƒ¨å“²ç†æ–‡æ¡ˆæ ·å¼ */
        .poetic-note {
            font-size: 0.75rem; 
            color: #b2bec3; 
            margin-top: 20px; 
            line-height: 1.6;
            font-weight: 300;
            letter-spacing: 0.5px;
            border-top: 1px solid #eee; /* åŠ ä¸€æ¡æ·¡æ·¡çš„åˆ†éš”çº¿ */
            padding-top: 15px;
        }
        
    </style>
</head>
<body onclick="goToPage2()">

    <div id="layer-1">
        <div class="time-label">åŒ—äº¬æ—¶é—´</div>
        <div id="realtime-date">----å¹´--æœˆ--æ—¥</div>
        <div id="realtime-clock">00:00:00</div>
        <div class="guide-text">æ‰“å¼€å£°éŸ³ ç‚¹ä¸€ä¸‹å±å¹•</div>
    </div>

    <div id="layer-2" class="card-container">
        <div class="vinyl-wrapper">
            <img src="image_0.png" class="vinyl" alt="Cover">
        </div>
        <h1>ç¥cixtoyisç”Ÿæ—¥å¿«ä¹</h1>
        <div id="age-counter">1</div>
        
        <button class="btn" onclick="goToPage3(event)">ğŸ</button>
    </div>

    <div id="layer-3" class="card-container">
        <div class="vinyl-wrapper">
            <img src="image_0.png" class="vinyl" alt="Cover">
        </div>
        
        <div class="wish-title">ç¥æ–°ä¸€å¹´å¼€å¿ƒå¿«ä¹<br>ä¸€åˆ‡é¡ºé‚</div>
        
        <a href="https://radio.garden/listen/hits/ht39osWT" target="_blank" class="btn">
            æ‰“å¼€ Radio Garden ğŸŒ
        </a>
        
        <p class="gift-desc">è¿™æ˜¯ä¸€ä¸ªèƒ½å¬å…¨ä¸–ç•Œç”µå°çš„ç½‘ç«™</p>
        
        <p class="poetic-note">
            å£°éŸ³çš„é€Ÿåº¦æ¯”å…‰æ…¢å¥½å¤š<br>
            æ‰€ä»¥ä¼°è®¡ä¹Ÿèƒ½é™ªä¼´æˆ‘ä»¬æ›´ä¹…å§
        </p>
    </div>

    <audio id="bgm" loop>
        <source src="åˆ«ç‚¹æˆ‘.mp3" type="audio/mpeg">
    </audio>

    <script>
        // --- æ ¸å¿ƒä¿®æ”¹ï¼šåŒ—äº¬æ—¶é—´é€»è¾‘ ---
        function updateClock() {
            const now = new Date();
            
            // å¼ºåˆ¶ä½¿ç”¨ä¸­å›½æ ‡å‡†æ—¶é—´ (Asia/Shanghai)
            const optionsDate = { timeZone: 'Asia/Shanghai', year: 'numeric', month: '2-digit', day: '2-digit' };
            const optionsTime = { timeZone: 'Asia/Shanghai', hour12: false, hour: '2-digit', minute: '2-digit', second: '2-digit' };

            // æ ¼å¼åŒ–æ—¥æœŸ (YYYY/MM/DD) -> æ›¿æ¢æ–œæ ä¸ºä¸­æ–‡
            const dateStr = now.toLocaleDateString('zh-CN', optionsDate);
            // æ ¼å¼åŒ–æ—¶é—´
            const timeStr = now.toLocaleTimeString('zh-CN', optionsTime);

            document.getElementById('realtime-date').innerText = dateStr;
            document.getElementById('realtime-clock').innerText = timeStr;
        }
        setInterval(updateClock, 1000);
        updateClock();

        let state = 0; // 0=Page1, 1=Page2, 2=Page3

        // è·³è½¬åˆ°ç¬¬äºŒé¡µ
        function goToPage2() {
            if (state !== 0) return;
            state = 1;

            // æ’­æ”¾éŸ³ä¹
            document.getElementById('bgm').play().catch(()=>{});

            // ç•Œé¢åˆ‡æ¢
            document.getElementById('layer-1').style.opacity = 0;
            setTimeout(() => { document.getElementById('layer-1').style.display = 'none'; }, 1000);

            const page2 = document.getElementById('layer-2');
            page2.classList.add('visible');
            page2.classList.add('playing'); // å¼€å§‹æ—‹è½¬

            // å¼€å§‹æ•°å­—åŠ¨ç”» 1 -> 21
            startAgeCounter();
        }

        // è·³è½¬åˆ°ç¬¬ä¸‰é¡µ
        function goToPage3(e) {
            e.stopPropagation(); // é˜²æ­¢å†’æ³¡è§¦å‘bodyç‚¹å‡»
            if (state !== 1) return;
            state = 2;

            const page2 = document.getElementById('layer-2');
            const page3 = document.getElementById('layer-3');

            // page2 æ¶ˆå¤±
            page2.classList.add('hidden');
            page2.classList.remove('visible');

            // page3 å‡ºç°
            setTimeout(() => {
                page3.classList.add('visible');
                page3.classList.add('playing'); // ç¬¬ä¸‰é¡µç»§ç»­æ—‹è½¬
            }, 500);
        }

        // æ•°å­—åŠ¨ç”»é€»è¾‘
        function startAgeCounter() {
            let current = 1;
            const target = 21;
            const dom = document.getElementById('age-counter');
            
            // åŠ¨ç”»æ—¶é•¿2.5ç§’
            const interval = 2500 / 20; 

            const timer = setInterval(() => {
                current++;
                dom.innerText = current;
                if (current >= target) clearInterval(timer);
            }, interval);
        }
    </script>
</body>
</html>
